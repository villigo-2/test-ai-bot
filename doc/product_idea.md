## LLM-ассистент аналитика по Google Trends (Telegram-бот)

### Цель
Создать телеграм-бота на базе LLM, который получает запрос пользователя и период анализа, обращается к Google Trends, формирует простую аналитику по динамике интереса и выдает краткий прогноз.

### Пользовательские сценарии (Happy path)
- **Запрос тренда**: пользователь отправляет боту текст запроса, страна и период (например, «chatgpt; 12m; Казахстан»). Бот возвращает:
  - краткое резюме тренда (растет/падает/стабилен)
  - ключевые метрики (средний интерес, медиана, волатильность, максимумы/минимумы)
  - выделенные пики/сезонность
  - простой краткосрочный прогноз на N недель/месяцев
  - при необходимости — рекомендации, как интерпретировать результаты
- **Смена периода/сравнение**: пользователь меняет период анализа или добавляет второй термин для сравнения.

### Основные функции
- **Интеграция с Google Trends**: получение временного ряда Interest over Time, связанных запросов, региональной разбивки.
- **Аналитика временного ряда**:
  - определение общей тенденции (линейный тренд, тест на монотонность)
  - обнаружение сезонности/пиков (автокорреляция, локальные максимумы)
  - базовые статистики (mean/median, min/max, стандартное отклонение)
- **Прогноз**: простой метод (например, линейная регрессия по тренду, экспоненциальное сглаживание или наивный сезонный прогноз) с короткой текстовой интерпретацией и указанием ограничений точности.
- **LLM-объяснение**: структурирование численных результатов в понятный ответ, учитывая системный промпт, который будет подготовлен вручную.

### Интерфейс телеграм-бота
- **Команды**: `/start`, `/help`.
- **Формат запроса**: свободный текст или шаблон: `trend: <запрос>; period: <7d|30d|12m|5y|all|YYYY-MM-DD:YYYY-MM-DD>; geo: <RU|US|UA|world>`.
- **Ответ**:
  - заголовок и краткое резюме тренда
  - ключевые метрики и инсайты
  - текстовый прогноз на выбранный горизонт
  - (опционально) изображение графика тренда
  - быстрые кнопки: «Изменить период», «Сравнить термин», «Показать регионы»

### Границы MVP
- Один термин на запрос; сравнение терминов — необязательно.
- Периоды: фиксированные пресеты (`7d`, `30d`, `12m`, `5y`, `all`).
- Гео по умолчанию — `world`.
- Ответ: текст + один простой график (PNG). Без хранения состояния пользователя.
- Прогноз: простой (наивный/линейный) на короткий горизонт.

### Ограничения и допущения
- Google Trends предоставляет относительные значения интереса (0–100), не абсолютные объемы поиска.
- Официального публичного API у Google Trends нет; предполагается использование неофициальных библиотек (например, `pytrends`) или сторонних провайдеров. Возможны лимиты, капча, блокировки.
- Точность прогноза ограничена качеством и дискретностью данных (ежедневные/недельные точки) и может сильно варьироваться между темами.

### Техническая архитектура (высокоуровневое видение)
- Telegram Bot API (webhook/long polling).
- Backend-сервис (например, Python + FastAPI):
  - модуль интеграции с Google Trends (`pytrends`)
  - модуль аналитики (pandas + простые модели из `statsmodels`/наивные методы)
  - модуль генерации ответов LLM (подключение к выбранному провайдеру)
- Логирование и базовый мониторинг.

### Риски
- Ограничения/нестабильность доступа к данным Google Trends (неофициальный доступ)
- Региональные ограничения, капчи, rate limits
- Потенциальные галлюцинации LLM при интерпретации чисел — требуется строгий системный промпт и проверка фактов

### Следующие шаги
1. Подготовить системный промпт LLM (тон, формат ответа, ограничения, запрет на домыслы, указание источников).
2. Определить набор пресетов периода и допустимые параметры гео/категории.
3. Собрать прототип бота: каркас команд `/start`, `/help`, обработчик текстовых запросов.
4. Реализовать получение ряда из Google Trends и вычисление базовых метрик.
5. Добавить простой прогноз и график.
6. Обернуть результаты в ответ через LLM и выкатить MVP.


